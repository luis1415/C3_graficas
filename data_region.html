<html>
<head>
    <link rel="stylesheet" type="text/css" href="c3.css">
    <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
    <script src="c3.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>
<style>
.c3-region.region-dormido {
  fill: black;
}

.c3-ygrid-line line {
    stroke: red;
}
</style>
<body>
<div id="presion"></div>

<script>
// creacion de la grafica a partir de los datos del GET
$(document).ready(function(){
    var x = $.ajax({
       url: 'http://localhost:5000/MAPA/1',
       dataType: 'text',
       type: 'GET',
       async: true
      });
      x.done(function(data){
        data = JSON.parse(data);
        fechas = data.fechas;
        frecuencias = data.frecuencias
        console.log(data.frecuencias);
        var chart2 = c3.generate({
            bindto: '#presion',
            color: {
                pattern: ['#ab7b0e', '#363FBC', '#B73540', '#B73540']
            },
            data: {
                x: 'date',
                xFormat: '%d/%m/%Y %H:%M:%S',
                columns: [
                    fechas,
                    frecuencias
                ]
            },
            grid: {
                x: {
                    show: true
                },
                y: {
                    show: true,
                    lines: [
                        {value: 100, text: 'Valor normal de la presion', position: 'middle', class: 'normal'}
                    ]
                }
            },
            axis: {
                x: {
                    type: 'timeseries',
                    tick: {
                        format: '%H:%M'
                    }
                }
            },
            regions: [
                {start: '27/08/2015 20:00:00', end: '28/08/2015 04:00:00', class: 'region-dormido'}
            ]
        });
      });
});
</script>

</body>
</html>
